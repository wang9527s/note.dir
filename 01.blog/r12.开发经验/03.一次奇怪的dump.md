

问题，一台iot设备，本地调用添加服务接口后，程序dump (有时立刻dump，有时过一会dump)，堆栈如下。

---

2025.07.08

**进度：**
1. 注释掉 CryptoUtil::AesGcmEncrypt 中的， AesGcmEncrypt，不会dump  
2. CryptoUtil::AesGcmEncrypt不返回字符串，增加std::string & 参数替代返回值，可以继续往下走。但会在下面的流程dump

**失败的尝试：**
1. 怀疑是库冲突，修改mbedtls为静态库。
2. 返回失败，怀疑是栈空间溢出，测试出了上面的进度2。修改栈空间大小，无法解决问题。
   不对，返回的是1.5k的string。但，如果string在栈上，其占用的栈空间也不大，数据是存放在堆空间的，栈上保留的是大小长度地址等信息。

---

2025.07.08  
其他同事测试，mbedtls改为debug版本，则没有问题

---

2025.07.10  

debug版本还是有问题，发现了触发时机。如果设备a，发起连接，则会dump。 （没详细了解）  

怀疑是工具链问题。（不太确定，设备的工具链确实有更新）