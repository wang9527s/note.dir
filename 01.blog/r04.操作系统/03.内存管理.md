&emsp;&emsp;DRAM内存，和磁盘一样，在硬件上也是按照bit临时存储数据。

&emsp;&emsp;在现代操作系统中，不论是虚拟内存还是物理内存，都不是以字节为单位进行管理的，而是以页（Page）为单位。一个内存页是一段固定大小的连续内存地址的总称，具体到Linux中，典型的内存页大小为4096Byte（4K）。  
&emsp;&emsp;malloc申请n字节的空间，实际申请到的block空间比n大，其中存放了一些控制块。

### 虚拟内存

&emsp;&emsp;[一篇文 带你搞懂，虚拟内存、内存分页、分段、段页式内存管理（超详细）](https://blog.csdn.net/m0_52192682/article/details/125781953)

+ 页表切换

  首先，每个进程都有自己的虚拟地址和物理地址的映射关系表，存放在内核态的某个区域。

  在进程切换的时候，操作系统会更改CPU中的页表基址寄存器，以指向新进程的页表。这个页表映射了新进程的虚拟地址空间到物理内存地址的关系。  
  可参考[TLB页表失效](https://www.eet-china.com/mp/a98376.html)。 

+ 换页和缺页异常

  - 换页操作
    
    换页操作通常是指操作系统为了管理内存资源，将某些内存页保存到磁盘上的一个过程。  
    当系统需要更多的物理内存来满足其他程序的需求时，将不再使用或很少使用的内存页保存到磁盘上，在需要时再从磁盘读取回来。

  - 缺页异常
  
    缺页异常是指当程序试图访问一个已经被映射到虚拟地址空间中，但实际上并没有加载到物理内存中的页时，会触发的一种异常。  
    这时，操作系统会通过预先设置好的缺页异常处理函数来处理这种情况。  
    查找空闲的物理页、将缺失的页从磁盘交换区（swap space）加载到物理内存中，并更新页表以映射虚拟地址到新加载的物理页。  
    这个过程可能涉及到复杂的数据结构和算法，以确保高效地管理内存资源。

&emsp;&emsp;换页操作和缺页异常，都是虚拟内存的调度策略。  
&emsp;&emsp;在操作系统运行的过程中，时有发生（包括进程切换）。